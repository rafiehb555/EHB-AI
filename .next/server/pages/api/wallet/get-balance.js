"use strict";(()=>{var e={};e.id=610,e.ids=[610],e.modules={127:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},1564:(e,t,n)=>{n.d(t,{bv:()=>d,QI:()=>c,vD:()=>l,k0:()=>f});var r=n(6603),a=n(6037),s=n.n(a);let i=new(s()).Schema({address:{type:String,required:!0},type:{type:String,enum:["ERC20","BEP20"],required:!0},symbol:{type:String},balance:{type:String,default:"0"}},{_id:!1}),o=new(s()).Schema({userId:{type:String,required:!0,unique:!0},addresses:{ERC20:{type:String,default:""},BEP20:{type:String,default:""}},tokens:[i]},{timestamps:!0}),u=s().models.Wallet||s().model("Wallet",o);async function l(e,t,n){await (0,r.A)();let a={};return a[`addresses.${t}`]=n,await u.findOneAndUpdate({userId:e},{$set:a},{new:!0,upsert:!0})}async function d(e,t){await (0,r.A)();let n=await u.findOne({userId:e});return n?n.addresses[t]:null}async function c(e){return await (0,r.A)(),await u.findOne({userId:e})}async function f(e,t,n,r){return{userId:e,type:t,to:n,amount:r,success:!0,message:"Transfer simulated (blockchain logic yahan add karein)"}}},3007:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},3516:(e,t,n)=>{e.exports=n(5600)},4417:(e,t,n)=>{n.r(t),n.d(t,{config:()=>d,default:()=>l,routeModule:()=>c});var r={};n.r(r),n.d(r,{default:()=>u});var a=n(3516),s=n(127),i=n(3007),o=n(1564);async function u(e,t){if("GET"===e.method){let{userId:n,type:r}=e.query;if(!n||!r)return t.status(400).json({error:"Missing userId or type",success:!1});try{let e=await (0,o.QI)(n);if(!e)return t.status(404).json({error:"Wallet not found",success:!1});let a=e.tokens.filter(e=>e.type===r);t.status(200).json({userId:n,type:r,tokens:a,success:!0})}catch(e){t.status(500).json({error:e.message,success:!1})}}else t.status(405).json({error:"Method not allowed"})}let l=(0,i.M)(r,"default"),d=(0,i.M)(r,"config"),c=new a.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/wallet/get-balance",pathname:"/api/wallet/get-balance",bundlePath:"",filename:""},userland:r})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6603:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6037),a=n.n(r);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){return i.conn||(i.promise||(i.promise=a().connect(s,{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise),i.conn}}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=4417);module.exports=n})();