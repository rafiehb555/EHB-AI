"use strict";(()=>{var e={};e.id=402,e.ids=[402],e.modules={127:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},1564:(e,n,t)=>{t.d(n,{bv:()=>l,QI:()=>c,vD:()=>d,k0:()=>f});var r=t(6603),s=t(6037),a=t.n(s);let i=new(a()).Schema({address:{type:String,required:!0},type:{type:String,enum:["ERC20","BEP20"],required:!0},symbol:{type:String},balance:{type:String,default:"0"}},{_id:!1}),o=new(a()).Schema({userId:{type:String,required:!0,unique:!0},addresses:{ERC20:{type:String,default:""},BEP20:{type:String,default:""}},tokens:[i]},{timestamps:!0}),u=a().models.Wallet||a().model("Wallet",o);async function d(e,n,t){await (0,r.A)();let s={};return s[`addresses.${n}`]=t,await u.findOneAndUpdate({userId:e},{$set:s},{new:!0,upsert:!0})}async function l(e,n){await (0,r.A)();let t=await u.findOne({userId:e});return t?t.addresses[n]:null}async function c(e){return await (0,r.A)(),await u.findOne({userId:e})}async function f(e,n,t,r){return{userId:e,type:n,to:t,amount:r,success:!0,message:"Transfer simulated (blockchain logic yahan add karein)"}}},3007:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,t){return t in n?n[t]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,t)):"function"==typeof n&&"default"===t?n:void 0}}})},3516:(e,n,t)=>{e.exports=t(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6603:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(6037),s=t.n(r);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){return i.conn||(i.promise||(i.promise=s().connect(a,{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise),i.conn}},9637:(e,n,t)=>{t.r(n),t.d(n,{config:()=>l,default:()=>d,routeModule:()=>c});var r={};t.r(r),t.d(r,{default:()=>u});var s=t(3516),a=t(127),i=t(3007),o=t(1564);async function u(e,n){if("POST"===e.method){let{userId:t}=e.query,{type:r,address:s}=e.body;if(!t||!r)return n.status(400).json({error:"Missing userId or type",success:!1});try{let e=await (0,o.vD)(t,r,s);n.status(200).json({userId:t,type:r,address:e.addresses[r],success:!0})}catch(e){n.status(500).json({error:e.message,success:!1})}}else n.status(405).json({error:"Method not allowed"})}let d=(0,i.M)(r,"default"),l=(0,i.M)(r,"config"),c=new s.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/wallet/set-address",pathname:"/api/wallet/set-address",bundlePath:"",filename:""},userland:r})}};var n=require("../../../webpack-api-runtime.js");n.C(e);var t=n(n.s=9637);module.exports=t})();