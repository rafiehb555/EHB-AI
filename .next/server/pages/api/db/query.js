"use strict";(()=>{var e={};e.id=816,e.ids=[816],e.modules={127:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},3007:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,o){return o in n?n[o]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,o)):"function"==typeof n&&"default"===o?n:void 0}}})},3516:(e,n,o)=>{e.exports=o(5600)},4651:(e,n,o)=>{o.d(n,{GB:()=>a,Xs:()=>i,dw:()=>c});var t=o(6037),r=o.n(t),s=o(6603);async function i(){return await (0,s.A)()}async function c(){return 0!==r().connection.readyState?(await r().disconnect(),{success:!0,message:"Disconnected from MongoDB"}):{success:!1,message:"No active MongoDB connection"}}async function a(e,n,...o){if(await (0,s.A)(),!r().connection.db)throw Error("No active MongoDB connection");let t=r().connection.db.collection(e);if("function"!=typeof t[n])throw Error(`Method ${n} not supported on collection`);return await t[n](...o)}},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6603:(e,n,o)=>{o.d(n,{A:()=>c});var t=o(6037),r=o.n(t);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let c=async function(){return i.conn||(i.promise||(i.promise=r().connect(s,{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise),i.conn}},9292:(e,n,o)=>{o.r(n),o.d(n,{config:()=>d,default:()=>u,routeModule:()=>l});var t={};o.r(t),o.d(t,{default:()=>a});var r=o(3516),s=o(127),i=o(3007),c=o(4651);async function a(e,n){if("POST"===e.method){let{collection:o,method:t,args:r=[]}=e.body;if(!o||!t)return n.status(400).json({error:"Missing collection or method",success:!1});try{let e=await (0,c.GB)(o,t,...r);n.status(200).json({result:e,success:!0})}catch(e){n.status(500).json({error:e.message,success:!1})}}else n.status(405).json({error:"Method not allowed"})}let u=(0,i.M)(t,"default"),d=(0,i.M)(t,"config"),l=new r.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/db/query",pathname:"/api/db/query",bundlePath:"",filename:""},userland:t})}};var n=require("../../../webpack-api-runtime.js");n.C(e);var o=n(n.s=9292);module.exports=o})();