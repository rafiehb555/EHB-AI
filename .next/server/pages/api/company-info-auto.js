"use strict";(()=>{var e={};e.id=915,e.ids=[915],e.modules={127:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},918:(e,t,n)=>{let o=n(9021),r=n(3873),{Configuration:i,OpenAIApi:a}=n(6082);class s{constructor(e,t="ehb_company_info"){this.projectRoot=e,this.infoFolder=r.join(e,t),this.openai=null,this.ensureInfoFolder()}ensureInfoFolder(){o.existsSync(this.infoFolder)||o.mkdirSync(this.infoFolder,{recursive:!0})}setOpenAIKey(e){let t=new i({apiKey:e});this.openai=new a(t)}async fetchAndSaveInfo(e,t){if(!this.openai)throw Error("OpenAI API key not set.");let n=(await this.openai.createChatCompletion({model:"gpt-4",messages:[{role:"user",content:e}]})).data.choices[0].message.content,i=r.join(this.infoFolder,t);return o.writeFileSync(i,n),n}async fetchCompanyOverview(){return this.fetchAndSaveInfo("What is the EHB company mission, services, and roadmap? Give details for documentation.","company_overview.txt")}async fetchModuleInfo(e){return this.fetchAndSaveInfo(`Explain the purpose, business logic, and APIs of the EHB module: ${e}.`,`${e}_info.txt`)}}e.exports=s},3007:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},3516:(e,t,n)=>{e.exports=n(5600)},3873:e=>{e.exports=require("path")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6020:(e,t,n)=>{n.r(t),n.d(t,{config:()=>A,default:()=>h,routeModule:()=>m});var o={};n.r(o),n.d(o,{default:()=>d});var r=n(3516),i=n(127),a=n(3007);n(3873);var s=n(918),u=n.n(s);let c=null,l=null,f=!1;async function p(){if(!f){f=!0;try{let e=process.env.OPENAI_API_KEY;if(!e)throw Error("OpenAI API key not set in environment variables.");let t=process.cwd(),n=new(u())(t);n.setOpenAIKey(e),l=await n.fetchCompanyOverview(),c=new Date}catch(e){l=`Error: ${e.message}`,c=new Date}finally{f=!1}}}async function d(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});t.status(200).json({lastFetched:c,info:l})}"undefined"==typeof global||global.__companyInfoAutoFetchStarted||(p(),setInterval(p,36e5),global.__companyInfoAutoFetchStarted=!0);let h=(0,a.M)(o,"default"),A=(0,a.M)(o,"config"),m=new r.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/company-info-auto",pathname:"/api/company-info-auto",bundlePath:"",filename:""},userland:o})},6082:e=>{e.exports=require("openai")},9021:e=>{e.exports=require("fs")}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=6020);module.exports=n})();